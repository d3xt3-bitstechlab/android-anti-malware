package isc.whu.defender;

import java.util.ArrayList;
import java.util.Iterator;
import java.util.List;

import android.app.Activity;
import android.content.pm.PackageInfo;
import android.graphics.drawable.Drawable;
import android.os.Bundle;

public class TrafficMonitor extends Activity {

	@Override
	protected void onCreate(Bundle savedInstanceState) {
		// TODO Auto-generated method stub
		super.onCreate(savedInstanceState);
		
		getInstalledAppInfo(false);
	}
	
	private ArrayList<AppInfo> getInstalledAppInfo(boolean getSysApp) {
		ArrayList<AppInfo> appinfo = new ArrayList<AppInfo>();
		List<PackageInfo> packs = getPackageManager().getInstalledPackages(0);
		
		Iterator<PackageInfo> it = packs.iterator();
		PackageInfo p;
		AppInfo app = new AppInfo();
		while (it.hasNext()) {
			p = it.next();
			if (p.applicationInfo.uid < 10000) 
				continue;
			app.appName = p.applicationInfo.loadLabel(getPackageManager()).toString();
			app.packageName = p.packageName;
			app.uid = p.applicationInfo.uid;
			app.versionCode = p.versionCode;
			app.versionName = p.versionName;
			app.appIcon = p.applicationInfo.loadIcon(getPackageManager());
				
		}
		
		
		return null;
	}
	
}

class AppInfo {
	public String appName;
	public String packageName;
	public String versionName;
	public long uid;
	public int versionCode;
	public Drawable appIcon;
}
